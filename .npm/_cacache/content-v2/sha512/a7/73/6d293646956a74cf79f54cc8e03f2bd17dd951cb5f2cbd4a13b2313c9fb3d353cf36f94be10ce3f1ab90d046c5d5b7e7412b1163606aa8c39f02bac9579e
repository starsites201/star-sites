{"_id":"qoa-format","_rev":"1-67b12614f5ab626e36c79b65bbb36389","name":"qoa-format","dist-tags":{"latest":"1.0.1"},"versions":{"1.0.0":{"name":"qoa-format","version":"1.0.0","description":"A JavaScript port of [The \"Quite OK Audio\" (QOA) format](https://github.com/phoboslab/qoa), a lossy audio compression that achieves relatively decent compression with fast decoding and not much complexity. Also see [this](https://phoboslab.org/log/2023/02","main":"index.js","type":"module","license":"MIT","author":{"name":"Matt DesLauriers","email":"dave.des@gmail.com","url":"https://github.com/mattdesl"},"dependencies":{"@thi.ng/bitstream":"^2.2.12"},"scripts":{"test":"node test/test.js","test:browser":"esbuild test/webaudio.js --outdir=test --bundle --servedir=test"},"keywords":[],"repository":{"type":"git","url":"git://github.com/mattdesl/qoa-format.git"},"homepage":"https://github.com/mattdesl/qoa-format","bugs":{"url":"https://github.com/mattdesl/qoa-format/issues"},"devDependencies":{"audiobuffer-to-wav":"^1.0.0","esbuild":"^0.17.6","minimist":"^1.2.7","tape":"^5.6.3","wav-decoder":"^1.3.0"},"gitHead":"9d2e10591cd5ca4483e23b29e08fe19d62aff8f6","_id":"qoa-format@1.0.0","_nodeVersion":"16.13.0","_npmVersion":"8.1.0","dist":{"integrity":"sha512-Vjp2aV2x06tHbZesCi2UtISaFdlLzy47Vbt0rNwwdihKFvGtUeFfytdnA8XZYADqWtRbK19+XXeRkv1Stg4qSQ==","shasum":"1638adb119ed3a32cf65efdb2c7e278f6d64b2ef","tarball":"https://registry.npmjs.org/qoa-format/-/qoa-format-1.0.0.tgz","fileCount":7,"unpackedSize":19297,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFwRGF6BYT8CX4i86zYnG6+hSfxn/l4JPDOlvjw1NYIPAiB2v71D3pLz5xyuEZZ4+pGWzen7PgnW1ZJFPZmwT/eZZg=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJj432rACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpifBAAj4BFPiA03GeTyL1V3IAuw9io/7Q30GP914tod9pDtIj3y1Jz\r\nWPq9bNeFJ1h2YngFayUbUj8WMg3zkpU1e/ezfhIaELqrxyJ5yN51dbVlvVPr\r\nyNIwJNUBDhOBTKt9BT/vjyJLCZTwFG7pY5sGCGPpKd/iCiEuFMTBCv5rfXZw\r\nTFSrSEAOi7wxVEYSuI+DiEctRQHJbBvgyo6GV/HoTmapkZxdeH1fkNbxzmlI\r\nS1INyPy6qpKXTF0tGhRAYCi/Q6Ak92V4WHQHde4aqNw7253i7d8udKoHhY51\r\nLu0KT/qOU+xtqdjcZ8wjtEyFz6gJraKy8mKQcaTUUKvvt4zcg/8w6ksCdoqx\r\nLXImzqbvTMFPSYe90YmZTg4hA0+1bUzcMvmu4TCJ9iaj2FnOb5TFz6CjM6AL\r\nzCSpK5p6hv0NZCJi6KlrBhx/CpInC4zhaoVcWldMyNL8mLrisnnKwacmDW0E\r\nMdhgYWa4TZBbZbGoeF+bhRxfLu+d3LY2JiGGEUbF4gsHlgvjTCdlgNXuVnf1\r\nUVDD7Zffd6zO77kYd1yHVHy8HQPT0GpIYnDfkDe6EbSJ92rAC5YerHjSOxGC\r\ntvbREf9bdH6Uf+daLoZmi6nBM8F7W+QXFob7KApvxatWxTrEUa6HZYySj817\r\ntoFN3rLlAlsujZfxeCFYKNlEQTNkDCZybqc=\r\n=G9Sr\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"mattdesl","email":"dave.des@gmail.com"},"directories":{},"maintainers":[{"name":"mattdesl","email":"dave.des@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/qoa-format_1.0.0_1675853227700_0.8506630865839577"},"_hasShrinkwrap":false},"1.0.1":{"name":"qoa-format","version":"1.0.1","description":"A JavaScript port of [The \"Quite OK Audio\" (QOA) format](https://github.com/phoboslab/qoa), a lossy audio compression that achieves relatively decent compression with fast decoding and not much complexity. Also see [this](https://phoboslab.org/log/2023/02","main":"index.js","type":"module","license":"MIT","author":{"name":"Matt DesLauriers","email":"dave.des@gmail.com","url":"https://github.com/mattdesl"},"dependencies":{"@thi.ng/bitstream":"^2.2.12"},"scripts":{"test":"node test/test.js","test:browser":"esbuild test/webaudio.js --outdir=test --bundle --servedir=test"},"keywords":[],"repository":{"type":"git","url":"git://github.com/mattdesl/qoa-format.git"},"homepage":"https://github.com/mattdesl/qoa-format","bugs":{"url":"https://github.com/mattdesl/qoa-format/issues"},"devDependencies":{"audiobuffer-to-wav":"^1.0.0","esbuild":"^0.17.6","minimist":"^1.2.7","tape":"^5.6.3","wav-decoder":"^1.3.0"},"gitHead":"66273accf656a9ad103bc1c64a75d0d3a33ba5b7","_id":"qoa-format@1.0.1","_nodeVersion":"19.9.0","_npmVersion":"9.6.3","dist":{"integrity":"sha512-dMB0Z6XQjdpz/Cw4Rf6RiBpQvUSPCfYlQMWvmuWlWkAT7nDQD29cVZ1SwDUB6DYJSitHENwbt90lqfI+7bvMcw==","shasum":"fb438b4757173e68b6e6baab316835e134ce0bca","tarball":"https://registry.npmjs.org/qoa-format/-/qoa-format-1.0.1.tgz","fileCount":7,"unpackedSize":19899,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDmRENuCN5cjESrPQr4ht/qdletyzAu+Qby6jg7GYs4jQIgaZeeDe/idhQACc+b1PKETrbEf8c0h1WF2jhgFqkJfmE="}]},"_npmUser":{"name":"mattdesl","email":"dave.des@gmail.com"},"directories":{},"maintainers":[{"name":"mattdesl","email":"dave.des@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/qoa-format_1.0.1_1696153241632_0.060823357536165634"},"_hasShrinkwrap":false}},"time":{"created":"2023-02-08T10:47:07.699Z","1.0.0":"2023-02-08T10:47:07.849Z","modified":"2023-10-01T09:40:42.051Z","1.0.1":"2023-10-01T09:40:41.836Z"},"maintainers":[{"name":"mattdesl","email":"dave.des@gmail.com"}],"description":"A JavaScript port of [The \"Quite OK Audio\" (QOA) format](https://github.com/phoboslab/qoa), a lossy audio compression that achieves relatively decent compression with fast decoding and not much complexity. Also see [this](https://phoboslab.org/log/2023/02","homepage":"https://github.com/mattdesl/qoa-format","keywords":[],"repository":{"type":"git","url":"git://github.com/mattdesl/qoa-format.git"},"author":{"name":"Matt DesLauriers","email":"dave.des@gmail.com","url":"https://github.com/mattdesl"},"bugs":{"url":"https://github.com/mattdesl/qoa-format/issues"},"license":"MIT","readme":"# qoa-format\n\nA JavaScript port of [The \"Quite OK Audio\" (QOA) format](https://github.com/phoboslab/qoa), a lossy audio compression that achieves relatively decent compression with fast decoding and not much complexity. Also see [this](https://phoboslab.org/log/2023/02/qoa-time-domain-audio-compression) blog post by @phoboslab.\n\nFeatures:\n\n- Lossy, time domain audio compression format with a constrained bitrate of 277 kbits/s for stereo 44100 Hz\n- This pure JavaScript encoder / decoder implementation bundles to about 6kb minified (or 3kb for just the decoder)\n- Works in Node.js and the browser without any specific audio APIs\n- Rough decoding performance tests on MBP M1 Max in Chrome show similar performance to WebAudio `decodeAudioData`\n- The audio format and encoder/decoder is open source and MIT licensed\n\n_This software is still experimental, unstable, and likely to change or break. Use at your own risk._\n\n## ‚ö†Ô∏è Warning\n\nIf you are hacking and experimenting with this, take care when using headphones as garbage data may produced loud noises that can damage hearing.\n\nAs the spec is still in flux, this may not correctly decode files generated by different versions of [the C encoder](https://github.com/phoboslab/qoa/) or third-party implementations. This has been tested against [this particular QOA commit tree](https://github.com/phoboslab/qoa/tree/e8386f41d435a864ce2890e9f56d964215b40301) when building from source on macOS.\n\n## Example\n\n```js\nimport { encode, decode } from 'qoa-format';\n\n// or just the decode/encode function -\n// import decode from 'qoa-format/decode.js';\n\n// Encoding raw audio samples\nconst audioData = {\n  sampleRate: 44100\n  channelData: [\n    new Float32Array([ /* audio samples */ ])\n  ]\n}\n\n// lossy encode raw audio samples to Uint8Array QOA file\nconst qoaFile = encode(audioData)\n\n// Decode QOA file back to audio data\nconst decodedAudio = decode(qoaFile);\n\n// Show info about the decoded file\nconsole.log(decodedAudio.sampleRate); // 44100\nconsole.log(decodedAudio.channels); // 1\nconsole.log(decodedAudio.samples); // (number of samples in audio signal)\nconsole.log(decodedAudio.channelData); // [ Float32Array(samples) ]\n```\n\nSee [test/sine.js](./test/sine.js) for encoding/decoding a 441 Hz sine wave, and [test/webaudio.js](./test/webaudio.js) for a decoder and web audio QOA player.\n\n## Install\n\nUse [npm](https://npmjs.com/) to install.\n\n```sh\nnpm install qoa-format --save\n```\n\n## API Usage\n\n#### `data = encode({ channelData, sampleRate })`\n\nEncodes the audio signal in `channelData` with `sampleRate` as a QOA file, returning `data` as a `Uint8Array`. The length of `channelData` determines the number of channels (mono, stereo, multi-channel), and each element is expected to be a `Float32Array` with the same length (i.e. `samples` or number of sample frames). The signal is expected to range from `-1..1`.\n\n#### `audio = decode(Uint8Array | Buffer)`\n\nDecodes the `Uint8Array` or `Buffer` object into an `audio` specifier which has the following format:\n\n```\n{\n  sampleRate, // in Hz\n  channels, // number of channels\n  samples, // number of frame samples per channel\n  channelData: [\n    // an array of audio samples for each channel\n    Float32Array(samples),\n    ...\n  ]\n}\n```\n\n## Run from Source\n\nOnce cloned, you can `npm install` and then run the test:\n\n```sh\nnpm run test\n```\n\nOr the HTML/WebAudio test, run the below command and then open [http://localhost:8000/test/webaudio.html](http://localhost:8000/test/webaudio.html). **Note:** Take caution when wearing headphones if you are hacking with this. üéß\n\n```sh\nnpm run test:browser\n```\n\nOr run the CLI to convert files:\n\n```sh\n# encode WAV to QOA\nnode test/cli.js input.wav output.qoa\n\n# decode QOA to WAV\nnode test/cli.js output.qoa converted.wav\n```\n\n## TODOs\n\n- A more optimized BitStream reader/writer could be added to this module to remove a dependency, produce a smaller build size, and potentially improve performance.\n- The QOA format is easily seekable, this should be exposed in the API to allow fast seeking and audio streaming on the web\n\n## Credits\n\n- QOA format by @phoboslab\n- JavaScript port by @mattdesl\n- Thanks to @thi.ng for the BitStream decoder\n\n## License\n\nMIT, see [LICENSE.md](http://github.com/mattdesl/qoa-format/blob/master/LICENSE.md) for details.\n","readmeFilename":"README.md"}